import{a0 as _,r,j as e,au as T,bb as j,bd as R,a2 as A,at as L,ag as O,aF as E,x as u,v as U,ai as I,t as i,be as B,aA as W,k as H}from"./vendor-react-BtnKiOrb.js";import{s as p}from"./strategy-qnBVQI5A.js";import{A as P,b as V,a as z}from"./alert-wYC2wlrk.js";import{B as a,e as t}from"./index-B87L8flj.js";import{C as l,a as c,b as N,c as f,d as b}from"./card-DaWziHEX.js";import{S as n}from"./skeleton-CrtzJpAL.js";function G(){const d=_(),[o,v]=r.useState([]),[w,m]=r.useState(!0),[y,x]=r.useState(null),h=async()=>{try{m(!0);const s=await p.getStrategies();v(s)}catch(s){console.error("Failed to fetch strategies:",s),i.error("Failed to load strategies")}finally{m(!1)}};r.useEffect(()=>{h()},[]);const k=async s=>{const g=p.getWebhookUrl(s);try{await navigator.clipboard.writeText(g),x(s),i.success("Webhook URL copied to clipboard"),setTimeout(()=>x(null),2e3)}catch{i.error("Failed to copy URL")}},C=s=>{switch(s){case"LONG":return e.jsx(H,{className:"h-4 w-4 text-green-500"});case"SHORT":return e.jsx(W,{className:"h-4 w-4 text-red-500"});case"BOTH":return e.jsx(B,{className:"h-4 w-4 text-blue-500"});default:return null}},S=s=>({tradingview:"TradingView",amibroker:"Amibroker",python:"Python",metatrader:"Metatrader",excel:"Excel",others:"Others"})[s]||s;return w?e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(n,{className:"h-8 w-48"}),e.jsx(n,{className:"h-10 w-32"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(s=>e.jsx(n,{className:"h-48"},s))})]}):e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Webhook Strategies"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your trading strategies and webhook integrations"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(a,{variant:"outline",size:"sm",onClick:h,children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(a,{onClick:()=>d("/strategy/new"),children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"New Strategy"]})]})]}),e.jsxs(P,{children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx(V,{children:"Webhook Integration"}),e.jsxs(z,{children:["Create strategies to receive alerts from TradingView, Amibroker, Python scripts, and more. Use keywords in your alert: ",e.jsx("code",{className:"bg-muted px-1 rounded",children:"BUY"}),","," ",e.jsx("code",{className:"bg-muted px-1 rounded",children:"SELL"}),","," ",e.jsx("code",{className:"bg-muted px-1 rounded",children:"SHORT"}),","," ",e.jsx("code",{className:"bg-muted px-1 rounded",children:"COVER"})]})]}),o.length===0?e.jsx(l,{className:"py-12",children:e.jsxs(c,{className:"flex flex-col items-center justify-center text-center",children:[e.jsx(A,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Strategies Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first webhook strategy to start receiving trading alerts."}),e.jsxs(a,{onClick:()=>d("/strategy/new"),children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Create Strategy"]})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:o.map(s=>e.jsxs(l,{className:"relative overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 ${s.is_active?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`}),e.jsx(N,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(f,{className:"text-lg",children:s.name}),e.jsx(b,{children:S(s.platform)})]}),e.jsx(t,{variant:s.is_active?"default":"secondary",children:s.is_active?"Active":"Inactive"})]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[C(s.trading_mode),e.jsx("span",{className:"text-muted-foreground",children:s.trading_mode})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(t,{variant:"outline",className:"font-normal",children:s.is_intraday?"Intraday":"Positional"})})]}),s.is_intraday&&s.start_time&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.start_time," - ",s.end_time,s.squareoff_time&&` (SqOff: ${s.squareoff_time})`]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(a,{variant:"outline",size:"sm",className:"flex-1 justify-start text-xs font-mono truncate",onClick:()=>k(s.webhook_id),children:[y===s.webhook_id?e.jsx(O,{className:"h-3 w-3 mr-2 text-green-500"}):e.jsx(E,{className:"h-3 w-3 mr-2"}),e.jsxs("span",{className:"truncate",children:[".../",s.webhook_id.slice(0,8),"..."]})]})}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(a,{variant:"outline",size:"sm",className:"flex-1",asChild:!0,children:e.jsxs(u,{to:`/strategy/${s.id}/configure`,children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Symbols"]})}),e.jsx(a,{variant:"default",size:"sm",className:"flex-1",asChild:!0,children:e.jsxs(u,{to:`/strategy/${s.id}`,children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"View"]})})]})]})]},s.id))}),e.jsxs(l,{children:[e.jsxs(N,{children:[e.jsx(f,{className:"text-lg",children:"Alert Keywords Reference"}),e.jsx(b,{children:"Include these keywords in your alert message to trigger orders"})]}),e.jsx(c,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(t,{className:"bg-green-500",children:"BUY"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Open long position"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(t,{className:"bg-red-500",children:"SELL"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Close long position"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(t,{className:"bg-orange-500",children:"SHORT"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Open short position"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(t,{className:"bg-blue-500",children:"COVER"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Close short position"})]})]})})]})]})}export{G as default};
